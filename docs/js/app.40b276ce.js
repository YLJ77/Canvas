(function(t){function e(e){for(var a,n,o=e[0],h=e[1],c=e[2],d=0,u=[];d<o.length;d++)n=o[d],r[n]&&u.push(r[n][0]),r[n]=0;for(a in h)Object.prototype.hasOwnProperty.call(h,a)&&(t[a]=h[a]);l&&l(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,o=1;o<i.length;o++){var h=i[o];0!==r[h]&&(a=!1)}a&&(s.splice(e--,1),t=n(n.s=i[0]))}return t}var a={},r={app:0},s=[];function n(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=h;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var a=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},s=[],n=i("2877"),o={},h=Object(n["a"])(o,r,s,!1,null,null,null),c=h.exports,l=i("8c4f"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("canvas",{attrs:{id:"canvas",width:"600",height:"600"},on:{mousedown:t.onMouseDown,mousemove:t.onMouseMove,mouseup:t.onMouseUp}},[t._v("Canvas not supported")]),i("ul",{attrs:{id:"controls"}},[i("li",[i("label",{attrs:{for:"color"}},[t._v("颜色")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],attrs:{id:"color"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.color=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"red"}},[t._v("red")]),i("option",{attrs:{value:"green"}},[t._v("green")]),i("option",{attrs:{value:"blue"}},[t._v("blue")]),i("option",{attrs:{value:"orange"}},[t._v("orange")]),i("option",{attrs:{value:"cornflowerblue",selected:""}},[t._v("cornflowerblue")]),i("option",{attrs:{value:"goldenrod"}},[t._v("goldenrod")]),i("option",{attrs:{value:"navy"}},[t._v("navy")]),i("option",{attrs:{value:"purple"}},[t._v("purple")])])]),i("li",[i("label",{attrs:{for:"shape"}},[t._v("形状")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.shape,expression:"shape"}],attrs:{id:"shape"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.shape=e.target.multiple?i:i[0]},function(e){t.mode="normal"}]}},[i("option",{attrs:{value:"Circle"}},[t._v("circle")]),i("option",{attrs:{value:"Line"}},[t._v("line")]),i("option",{attrs:{value:"RoundedRect"}},[t._v("RoundedRect")]),i("option",{attrs:{value:"Polygon"}},[t._v("Polygon")]),i("option",{attrs:{value:"BezierCurve"}},[t._v("BezierCurve")])])]),i("li",{directives:[{name:"show",rawName:"v-show",value:"Polygon"===t.shape,expression:"shape === 'Polygon'"}]},[i("label",{attrs:{for:"sides"}},[t._v("边数")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.sides,expression:"sides"}],attrs:{type:"text",id:"sides"},domProps:{value:t.sides},on:{input:function(e){e.target.composing||(t.sides=e.target.value)}}}),i("label",{attrs:{for:"startRadians"}},[t._v("开始角度")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.startRadians,expression:"startRadians"}],attrs:{type:"text",id:"startRadians"},domProps:{value:t.startRadians},on:{input:function(e){e.target.composing||(t.startRadians=e.target.value)}}})]),i("li",[i("label",{attrs:{for:"normal-radio"}},[t._v("画图")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],attrs:{type:"radio",id:"normal-radio",value:"normal"},domProps:{checked:t._q(t.mode,"normal")},on:{change:function(e){t.mode="normal"}}}),i("label",{attrs:{for:"drag-radio"}},[t._v("拖拽")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],attrs:{type:"radio",id:"drag-radio",value:"drag"},domProps:{checked:t._q(t.mode,"drag")},on:{change:function(e){t.mode="drag"}}}),"BezierCurve"===t.shape?[i("label",{attrs:{for:"edit-radio"}},[t._v("编辑")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],attrs:{type:"radio",id:"edit-radio",value:"edit"},domProps:{checked:t._q(t.mode,"edit")},on:{change:function(e){t.mode="edit"}}})]:t._e(),i("label",{attrs:{for:"rotate-radio"}},[t._v("旋转")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],attrs:{type:"radio",id:"rotate-radio",value:"rotate"},domProps:{checked:t._q(t.mode,"rotate")},on:{change:function(e){t.mode="rotate"}}}),i("label",{attrs:{for:"eraser-radio"}},[t._v("橡皮擦")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],attrs:{type:"radio",id:"eraser-radio",value:"erase"},domProps:{checked:t._q(t.mode,"erase")},on:{change:function(e){t.mode="erase"}}}),i("label",{attrs:{for:"guidewireCheckbox"}},[t._v("导线")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.guidewires,expression:"guidewires"}],attrs:{id:"guidewireCheckbox",type:"checkbox",checked:""},domProps:{checked:Array.isArray(t.guidewires)?t._i(t.guidewires,null)>-1:t.guidewires},on:{change:function(e){var i=t.guidewires,a=e.target,r=!!a.checked;if(Array.isArray(i)){var s=null,n=t._i(i,s);a.checked?n<0&&(t.guidewires=i.concat([s])):n>-1&&(t.guidewires=i.slice(0,n).concat(i.slice(n+1)))}else t.guidewires=r}}}),i("label",{attrs:{for:"checkbox"}},[t._v("填充:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.isFillColor,expression:"isFillColor"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.isFillColor)?t._i(t.isFillColor,null)>-1:t.isFillColor},on:{change:function(e){var i=t.isFillColor,a=e.target,r=!!a.checked;if(Array.isArray(i)){var s=null,n=t._i(i,s);a.checked?n<0&&(t.isFillColor=i.concat([s])):n>-1&&(t.isFillColor=i.slice(0,n).concat(i.slice(n+1)))}else t.isFillColor=r}}}),i("input",{attrs:{id:"eraseAllButton",type:"button",value:"擦除所有"},on:{click:t.erase}})],2),i("li",[i("label",{attrs:{for:"eraserWidth"}},[t._v("橡皮擦宽度")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.eraserWidth,expression:"eraserWidth"}],attrs:{type:"text",id:"eraserWidth"},domProps:{value:t.eraserWidth},on:{input:function(e){e.target.composing||(t.eraserWidth=e.target.value)}}}),i("label",{attrs:{for:"eraser"}},[t._v("橡皮擦类型")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.eraserType,expression:"eraserType"}],attrs:{id:"eraser"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.eraserType=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"circle"}},[t._v("circle")]),i("option",{attrs:{value:"square"}},[t._v("square")])])])])])},u=[],f=i("5d73"),v=i.n(f),y=(i("ac6a"),i("6c7b"),i("f499")),g=i.n(y),x=i("7618"),p=(i("6762"),i("2fdb"),i("a4bb")),b=i.n(p),w=i("061b"),P=i.n(w),m=i("4aa6"),S=i.n(m),k=i("5176"),R=i.n(k);function _(t){var e=t.obj,i=t.exclusiveKey;return e=R()(S()(P()(e)),e),b()(e).forEach(function(t){i.includes(t)||"object"!==Object(x["a"])(e[t])||(e[t]=JSON.parse(g()(e[t])))}),e}function E(t){var e=t.x,i=t.y,a=t.radius,r=void 0===a?5:a,s=t.ctx,n=t.color,o=void 0===n?"red":n;s.save(),s.beginPath(),s.fillStyle=o,s.arc(e,i,r,0,2*Math.PI,!1),s.fill(),s.restore()}function T(t){var e=t.ctx,i=t.imgData;e.putImageData(i,0,0)}function O(t){var e=t.ctx,i=t.canvas;return e.getImageData(0,0,i.width,i.height)}function I(t){var e=t.x,i=t.y,a=t.canvas,r=a.getBoundingClientRect();return{x:e-r.left*(a.width/r.width),y:i-r.top*(a.height/r.height)}}function M(t){var e=t.y,i=t.ctx;i.beginPath(),i.moveTo(0,e+.5),i.lineTo(i.canvas.width,e+.5),i.stroke()}function L(t){var e=t.x,i=t.ctx;i.beginPath(),i.moveTo(e+.5,0),i.lineTo(e+.5,i.canvas.height),i.stroke()}function A(t){var e=t.x,i=t.y,a=t.ctx;a.save(),a.strokeStyle="rgba(0,0,230,0.4)",a.lineWidth=.5,L({x:e,ctx:a}),M({y:i,ctx:a}),a.restore()}function D(t){var e=t.ctx,i=t.color,a=t.stepx,r=t.stepy;e.save(),e.strokeStyle=i,e.lineWidth=.5;for(var s=a+.5;s<e.canvas.width;s+=a)e.beginPath(),e.moveTo(s,0),e.lineTo(s,e.canvas.height),e.stroke();for(var n=r+.5;n<e.canvas.height;n+=r)e.beginPath(),e.moveTo(0,n),e.lineTo(e.canvas.width,n),e.stroke();e.restore()}var C=i("01c8"),N=i("308d"),Y=i("6bb5"),j=i("4e2b"),X=(i("7f7f"),i("b0b4")),G=i("d225"),W=function t(e,i){Object(G["a"])(this,t),this.x=e,this.y=i},K=function(){function t(e){var i=e.ctx,a=e.strokeStyle,r=e.fillStyle,s=e.filled,n=e.startRadians;Object(G["a"])(this,t),this.ctx=i,this.strokeStyle=a,this.fillStyle=r,this.filled=s,this.type=(this instanceof t?this.constructor:void 0).name,this.offsets=null,this.startRadians=n||0}return Object(X["a"])(t,[{key:"savePointOffset",value:function(t){var e=this.x,i=this.y;this.offsets=[];var a=t.x-e,r=t.y-i;this.offsets.push({offsetX:a,offsetY:r})}},{key:"updatePointsOnMoving",value:function(t){var e=this;this.offsets.forEach(function(i){e.x=t.x-i.offsetX,e.y=t.y-i.offsetY})}},{key:"createPath",value:function(){}},{key:"createEditPath",value:function(){this.createPath()}},{key:"draw",value:function(){var t=this.ctx,e=this.filled,i=this._debugger,a=this.drawDebuggerPoint;t.save(),this.createPath(t),t.strokeStyle=this.strokeStyle,t.stroke(),e&&(t.fillStyle=this.fillStyle,t.fill()),t.restore(),a&&i&&this.drawDebuggerPoint()}},{key:"setShapeTransform",value:function(t){var e=t.radians,i=t.tx,a=t.ty,r=this.ctx,s=Math.sin(e),n=Math.cos(e),o={a:n,c:-s,e:i,b:s,d:n,f:a},h=o.a,c=o.b,l=o.c,d=o.d,u=o.e,f=o.f;r.transform(h,c,l,d,u,f),r.currentTransform=o}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.ctx,i=this.x,a=this.y;e.save(),this.startRadians=t,this.setShapeTransform({radians:t,tx:i,ty:a}),this.x=0,this.y=0,this.draw(),e.restore(),this.x=i,this.y=a}},{key:"getTransformPointToScreenPoint",value:function(t){var e=t.x,i=t.y,a=t.tx,r=t.ty,s=this.ctx,n=s.currentTransform,o=n.a,h=n.b,c=n.c,l=n.d,d=n.e,u=n.f;return void 0!==a&&(d=a),void 0!==r&&(u=r),{x:e*o+i*c+d,y:e*h+i*l+u}}},{key:"updatePointAfterRotated",value:function(){}}]),t}(),F=function(t){function e(t){var i,a=t.ctx,r=t.pointRadius,s=void 0===r?5:r,n=t.startRadians,o=t.fillStyle,h=t.strokeStyle,c=t.endPoints,l=t.controlPoints;return Object(G["a"])(this,e),i=Object(N["a"])(this,Object(Y["a"])(e).call(this,{ctx:a,strokeStyle:h,fillStyle:o,startRadians:n,filled:!1})),i.endPoints=c,i.controlPoints=l,i.draggingPoint=null,i.pointRadius=s,i.isEditing=!1,i.setCenter(),i}return Object(j["a"])(e,t),Object(X["a"])(e,[{key:"setCenter",value:function(){var t=this.getRectInfo(),e=t.width,i=t.height,a=t.x,r=t.y;this.radius=Math.sqrt(Math.pow(e,2)+Math.pow(i,2)),this.x=e/2+a,this.y=i/2+r}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.ctx,i=this.x,a=this.y,r=this.endPoints,s=this.controlPoints,n=JSON.parse(g()(r)),o=JSON.parse(g()(s));e.save(),this.startRadians=t,this.setShapeTransform({radians:t,tx:i,ty:a}),this.x=0,this.y=0,r.concat(s).forEach(function(t){t.x-=i,t.y-=a}),this.draw(),e.restore(),this.x=i,this.y=a,this.endPoints=n,this.controlPoints=o}},{key:"updatePointAfterRotated",value:function(){var t=this,e=this.endPoints,i=this.controlPoints,a=this.x,r=this.y;e.concat(i).forEach(function(e){var i=e.x,s=e.y;i-=a,s-=r;var n=t.getTransformPointToScreenPoint({x:i,y:s});e.x=n.x,e.y=n.y})}},{key:"stroke",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.filled,i=void 0!==e&&e,a=this.ctx,r=this.strokeStyle,s=this.fillStyle;a.save(),a.strokeStyle=r,a.stroke(),i&&(a.fillStyle=s,a.fill()),a.restore()}},{key:"createPointPath",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.isDraw,a=void 0!==i&&i,r=this.endPoints,s=this.controlPoints,n=this.ctx,o=this.pointRadius;!a&&n.beginPath(),r.concat(s).forEach(function(e){var i=e.x,r=e.y;a?(n.beginPath(),n.arc(i,r,o,0,2*Math.PI,!1),n.closePath(),t.stroke({filled:!0})):n.arc(i,r,o,0,2*Math.PI,!1)}),!a&&n.closePath()}},{key:"drawCurve",value:function(){var t=this.endPoints,e=this.controlPoints,i=this.ctx;i.beginPath(),i.moveTo(t[0].x,t[0].y),i.bezierCurveTo(e[0].x,e[0].y,e[1].x,e[1].y,t[1].x,t[1].y),this.stroke(),i.closePath()}},{key:"savePointOffset",value:function(t){var e=this,i=this.endPoints,a=this.controlPoints;this.offsets=[],i.concat(a).forEach(function(i){var a=t.x-i.x,r=t.y-i.y;e.offsets.push({offsetX:a,offsetY:r})})}},{key:"updatePointsOnMoving",value:function(t){var e=this.endPoints,i=this.controlPoints,a=this.offsets;e.concat(i).forEach(function(e,i){e.x=t.x-a[i].offsetX,e.y=t.y-a[i].offsetY})}},{key:"createRectPath",value:function(){var t=this.getRectInfo(),e=t.x,i=t.y,a=t.width,r=t.height,s=this.ctx;s.beginPath(),s.rect(e,i,a,r),s.closePath()}},{key:"getRectInfo",value:function(){var t,e,i,a,r=this.endPoints,s=this.controlPoints;return t=e=1e5,i=a=0,r.concat(s).forEach(function(r){var s=r.x,n=r.y;t=Math.min(t,s),e=Math.min(e,n),i=Math.max(i,s),a=Math.max(a,n)}),{x:t,y:e,width:i-t,height:a-e}}},{key:"createEditPath",value:function(){this.createPointPath()}},{key:"createPath",value:function(){this.createRectPath()}},{key:"draw",value:function(){this.isEditing&&this.createPointPath({isDraw:!0}),this.drawCurve()}},{key:"getDraggingPoint",value:function(t){var e=this.endPoints,i=this.controlPoints,a=this.ctx,r=5,s=i.concat(e),n=!0,o=!1,h=void 0;try{for(var c,l=v()(s);!(n=(c=l.next()).done);n=!0){var d=c.value;if(a.beginPath(),a.arc(d.x,d.y,r,0,2*Math.PI,!1),a.closePath(),a.isPointInPath(t.x,t.y)){this.draggingPoint=d;break}}}catch(u){o=!0,h=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw h}}}},{key:"updatePointOnEditing",value:function(t){var e=this.draggingPoint;e.x=t.x,e.y=t.y}}]),e}(K),H=function(t){function e(t){var i,a=t.ctx,r=t.filled,s=t.strokeStyle,n=t.beginX,o=t.beginY,h=t.endX,c=t.endY,l=t.startRadians;return Object(G["a"])(this,e),i=Object(N["a"])(this,Object(Y["a"])(e).call(this,{ctx:a,strokeStyle:s,filled:r,startRadians:l})),i.x=n,i.y=o,i.endX=h,i.endY=c,i.radius=Math.sqrt(Math.pow(Math.abs(n-h),2)+Math.pow(Math.abs(o-c),2)),i}return Object(j["a"])(e,t),Object(X["a"])(e,[{key:"updatePointAfterRotated",value:function(){var t=this.endX,e=this.endY,i=this.x,a=this.y;t-=i,e-=a;var r=this.getTransformPointToScreenPoint({x:t,y:e});this.endX=r.x,this.endY=r.y}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.ctx,i=this.endX,a=this.endY,r=this.x,s=this.y;e.save(),this.setShapeTransform({radians:t,tx:r,ty:s}),this.x=0,this.y=0,this.endX-=r,this.endY-=s,this.draw(),e.restore(),this.x=r,this.y=s,this.endX=i,this.endY=a}},{key:"createPath",value:function(){var t=this.x,e=this.y,i=this.endX,a=this.endY,r=this.ctx;r.beginPath(),r.rect(Math.min(t,i),Math.min(e,a),Math.abs(t-i),Math.abs(e-a)),r.closePath()}},{key:"savePointOffset",value:function(t){var e=this.x,i=this.y,a=this.endX,r=this.endY;this.offsets=[],this.offsets.push({offsetX:t.x-e,offsetY:t.y-i}),this.offsets.push({offsetX:t.x-a,offsetY:t.y-r})}},{key:"updatePointsOnMoving",value:function(t){var e=this.offsets;this.x=t.x-e[0].offsetX,this.y=t.y-e[0].offsetY,this.endX=t.x-e[1].offsetX,this.endY=t.y-e[1].offsetY}},{key:"draw",value:function(){var t=this.x,e=this.y,i=this.endX,a=this.endY,r=this.ctx,s=this.strokeStyle;r.save(),r.beginPath(),r.moveTo(t,e),r.lineTo(i,a),r.closePath(),r.strokeStyle=s,r.stroke(),r.restore()}}]),e}(K),B=function(t){function e(t){var i,a=t.centerX,r=t.centerY,s=t.radius,n=t.ctx,o=t.filled,h=t.strokeStyle,c=t.fillStyle;return Object(G["a"])(this,e),i=Object(N["a"])(this,Object(Y["a"])(e).call(this,{ctx:n,strokeStyle:h,fillStyle:c,filled:o})),i.x=a,i.y=r,i.radius=s,i}return Object(j["a"])(e,t),Object(X["a"])(e,[{key:"createPath",value:function(){var t=this.ctx,e=this.x,i=this.y,a=this.radius;t.beginPath(),t.arc(e,i,a,0,2*Math.PI,!1),t.closePath()}}]),e}(K),q=function(t){function e(t){var i,a=t.ctx,r=t.width,s=t.height,n=t.startRadians,o=t.cornerRadius,h=void 0===o?10:o,c=t.cornerX,l=t.cornerY,d=t.fillStyle,u=t.strokeStyle,f=t.filled;return Object(G["a"])(this,e),i=Object(N["a"])(this,Object(Y["a"])(e).call(this,{fillStyle:d,filled:f,strokeStyle:u,startRadians:n,ctx:a})),i.x=r/2+c,i.y=s/2+l,i.cornerX=c,i.cornerY=l,i.cornerRadius=h,i.width=r,i.height=s,i.radius=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),i.isRotated=!1,i._debugger=!1,i.setControlPoint(),i}return Object(j["a"])(e,t),Object(X["a"])(e,[{key:"setControlPoint",value:function(){var t=this.cornerX,e=this.cornerY,i=this.cornerRadius,a=this.width,r=this.height,s=t+i,n=t+a,o=e+r;this.controlPoint=[{x:s,y:e},{cx1:n,cy1:e,cx2:n,cy2:o,radius:i},{cx1:n,cy1:o,cx2:t,cy2:o,radius:i},{cx1:t,cy1:o,cx2:t,cy2:e,radius:i},{cx1:t,cy1:e,cx2:s,cy2:e,radius:i}]}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.ctx,i=this.width,a=this.height,r=this.cornerX,s=this.cornerY,n=this.x,o=this.y,h=-i/2,c=-a/2;this.isRotated=!0,this.startRadians=t,e.save(),this.setShapeTransform({radians:t,tx:n,ty:o}),this.x=0,this.y=0,this.cornerX=h,this.cornerY=c,this.setControlPoint(),this.draw(),e.restore(),this.x=n,this.y=o,this.cornerX=r,this.cornerY=s}},{key:"updatePointAfterRotated",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.tx,a=e.ty,r=this.cornerRadius,s=this.width,n=this.height,o=this.controlPoint,h=-s/2,c=-n/2,l=h+r,d=h+s,u=c+n,f=[];o.forEach(function(e,s){var n,o,v;switch(s){case 0:n=t.getTransformPointToScreenPoint({x:l,y:c,tx:i,ty:a});break;case 1:o=t.getTransformPointToScreenPoint({x:d,y:c,tx:i,ty:a}),v=t.getTransformPointToScreenPoint({x:d,y:u,tx:i,ty:a});break;case 2:o=t.getTransformPointToScreenPoint({x:d,y:u,tx:i,ty:a}),v=t.getTransformPointToScreenPoint({x:h,y:u,tx:i,ty:a});break;case 3:o=t.getTransformPointToScreenPoint({x:h,y:u,tx:i,ty:a}),v=t.getTransformPointToScreenPoint({x:h,y:c,tx:i,ty:a});break;case 4:o=t.getTransformPointToScreenPoint({x:h,y:c,tx:i,ty:a}),v=t.getTransformPointToScreenPoint({x:l,y:c,tx:i,ty:a});break}0===s?f.push({x:n.x,y:n.y}):f.push({cx1:o.x,cy1:o.y,cx2:v.x,cy2:v.y,radius:r}),t.controlPoint=f})}},{key:"savePointOffset",value:function(t){var e=this.cornerX,i=this.cornerY,a=t.x-e,r=t.y-i;this.offsets=[{offsetX:a,offsetY:r}]}},{key:"updatePointsOnMoving",value:function(t){var e=this;this.offsets.forEach(function(i){e.cornerX=t.x-i.offsetX,e.cornerY=t.y-i.offsetY});var i=this.width,a=this.height,r=this.cornerX,s=this.cornerY,n=this.isRotated;this.x=i/2+r,this.y=a/2+s,n?this.updatePointAfterRotated({tx:this.x,ty:this.y}):this.setControlPoint({cornerX:r,cornerY:s})}},{key:"createPath",value:function(){var t=this.ctx,e=this.controlPoint,i=Object(C["a"])(e),a=i[0],r=i.slice(1);t.beginPath(),t.moveTo(a.x,a.y),r.forEach(function(e){var i=e.cx1,a=e.cy1,r=e.cx2,s=e.cy2,n=e.radius;t.arcTo(i,a,r,s,n)}),t.closePath()}},{key:"drawDebuggerPoint",value:function(){var t=this.ctx,e=this.controlPoint,i=Object(C["a"])(e),a=i[0],r=i.slice(1),s=4;E({x:a.x,y:a.y,ctx:t,radius:s}),r.forEach(function(e){var i=e.cx1,a=e.cy1,r=e.cx2,n=e.cy2;E({x:i,y:a,ctx:t,color:"green",radius:s}),E({x:r,y:n,ctx:t,color:"yellow",radius:s})})}}]),e}(K),z=function(t){function e(t){var i,a=t.centerX,r=t.centerY,s=t.radius,n=t.sides,o=t.startRadians,h=t.strokeStyle,c=t.fillStyle,l=t.filled,d=t.ctx;return Object(G["a"])(this,e),i=Object(N["a"])(this,Object(Y["a"])(e).call(this,{ctx:d,filled:l,fillStyle:c,strokeStyle:h,startRadians:o})),i.x=a,i.y=r,i.radius=s,i.sides=n,i}return Object(j["a"])(e,t),Object(X["a"])(e,[{key:"getPoints",value:function(){for(var t=[],e=this.startRadians||0,i=0;i<this.sides;++i)t.push(new W(this.x+this.radius*Math.sin(e),this.y-this.radius*Math.cos(e))),e+=2*Math.PI/this.sides;return t}},{key:"createPath",value:function(){var t=this.getPoints(),e=this.ctx;e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var i=1;i<this.sides;++i)e.lineTo(t[i].x,t[i].y);e.closePath()}}]),e}(K),U=function(){function t(e){var i=e.ctx,a=e.shape,r=e.loc,s=e.rotatingLockRadians;Object(G["a"])(this,t),this.ctx=i,this.shape=a,this.loc=r,this.rotatingLockRadians=s,this.RADIUS=10,this.STROKE_STYLE="rgba(0, 0, 0, 0.8)",this.FILL_STYLE="rgba(255, 255, 255, 0.2)",this.SHADOW_COLOR="rgba(255, 255, 255, 0.4)",this.DEGREE_RING_MARGIN=35,this.TRACKING_RING_MARGIN=55,this.DEGREE_ANNOTATIONS_FILL_STYLE="rgba(0, 0, 230, 0.8)",this.DEGREE_ANNOTATIONS_TEXT_SIZE=11,this.DEGREE_OUTER_RING_MARGIN=this.DEGREE_RING_MARGIN,this.TICK_WIDTH=10,this.TICK_LONG_STROKE_STYLE="rgba(100, 140, 230, 0.9)",this.TICK_SHORT_STROKE_STYLE="rgba(100, 140, 230, 0.7)",this.TRACKING_RING_STROKING_STYLE="rgba(100, 140, 230, 0.3)"}return Object(X["a"])(t,[{key:"drawCentroid",value:function(){var t=this.ctx,e=this.shape,i=e.x,a=e.y,r=this.STROKE_STYLE,s=this.FILL_STYLE,n=this.SHADOW_COLOR,o=this.RADIUS;t.beginPath(),t.save(),t.strokeStyle=r,t.fillStyle=s,t.shadowColor=n,t.arc(i,a,o,0,2*Math.PI,!1),t.stroke(),t.fill(),t.restore()}},{key:"drawCentroidGuidewire",value:function(){var t,e,i=this.loc,a=this.shape,r=this.ctx,s=this.FILL_STYLE,n=this.TRACKING_RING_MARGIN,o=this.rotatingLockRadians,h=Math.atan((i.y-a.y)/(i.x-a.x));t=a.radius+n,h-=o,e=i.x>=a.x?{x:a.x+t*Math.cos(h),y:a.y+t*Math.sin(h)}:{x:a.x-t*Math.cos(h),y:a.y-t*Math.sin(h)},r.save(),r.beginPath(),r.moveTo(a.x,a.y),r.lineTo(e.x,e.y),r.stroke(),r.beginPath(),r.arc(e.x,e.y,5,0,2*Math.PI,!1),r.stroke(),r.fillStyle=s,r.fill(),r.restore()}},{key:"drawDegreeOuterDial",value:function(){var t=this.ctx,e=this.shape,i=this.DEGREE_OUTER_RING_MARGIN;t.save(),t.strokeStyle="rgba(0, 0, 0, 0.1)",t.arc(e.x,e.y,e.radius+i,0,2*Math.PI,!0),t.stroke(),t.restore()}},{key:"drawDegreeAnnotations",value:function(){var t=this.shape,e=this.TICK_WIDTH,i=this.DEGREE_RING_MARGIN,a=this.ctx,r=this.DEGREE_ANNOTATIONS_FILL_STYLE,s=this.DEGREE_ANNOTATIONS_TEXT_SIZE,n=t.radius+i;a.save(),a.fillStyle=r,a.font=s+"px Helvetica",a.textAlign="center",a.textBaseline="middle";for(var o=0;o<2*Math.PI;o+=Math.PI/8)a.beginPath(),a.fillText((180*o/Math.PI).toFixed(0),t.x+Math.cos(o)*(n-2*e),t.y+Math.sin(o)*(n-2*e));a.restore()}},{key:"drawDegreeDialTicks",value:function(){var t=this.shape,e=this.DEGREE_RING_MARGIN,i=this.ctx,a=this.TICK_WIDTH,r=this.TICK_LONG_STROKE_STYLE,s=this.TICK_SHORT_STROKE_STYLE,n=t.radius+e,o=2*Math.PI,h=Math.PI/64;i.save();for(var c=0,l=0;c<o;c+=h,++l)i.beginPath(),l%4===0?(i.moveTo(t.x+Math.cos(c)*(n-a),t.y+Math.sin(c)*(n-a)),i.lineTo(t.x+Math.cos(c)*n,t.y+Math.sin(c)*n),i.strokeStyle=r,i.stroke()):(i.moveTo(t.x+Math.cos(c)*(n-a/2),t.y+Math.sin(c)*(n-a/2)),i.lineTo(t.x+Math.cos(c)*n,t.y+Math.sin(c)*n),i.strokeStyle=s,i.stroke()),i.restore()}},{key:"drawDegreeInnerDial",value:function(){var t=this.shape,e=this.ctx,i=this.DEGREE_RING_MARGIN,a=this.TICK_WIDTH;e.save(),e.strokeStyle="rgba(0, 0, 0, 0.1)",e.beginPath(),e.arc(t.x,t.y,t.radius+i-a,0,2*Math.PI,!1),e.stroke(),e.restore()}},{key:"drawOutMostDial",value:function(){var t=this.shape,e=this.ctx,i=this.TRACKING_RING_STROKING_STYLE,a=this.TRACKING_RING_MARGIN;e.save(),e.shadowColor="rgba(0, 0, 0, 0.7)",e.shadowOffsetX=3,e.shadowOffsetY=3,e.shadowBlur=6,e.strokeStyle=i,e.arc(t.x,t.y,t.radius+a,0,2*Math.PI,!1),e.stroke(),e.restore()}},{key:"draw",value:function(){var t=this.ctx;this.drawCentroid(),this.drawCentroidGuidewire(),t.beginPath(),this.drawOutMostDial(),this.drawDegreeOuterDial(),t.fillStyle="rgba(100, 140, 230, 0.1)",t.fill(),t.beginPath(),this.drawDegreeOuterDial(),t.stroke(),this.drawDegreeDialTicks(),this.drawDegreeInnerDial(),this.drawDegreeAnnotations()}}]),t}(),J=i("59ad"),$=i.n(J),Z=function(){function t(e){var i=e.type,a=e.width,r=e.ctx;Object(G["a"])(this,t),this.ctx=r,this.type=i,this.width=a,this.ERASER_LINE_WIDTH=1,this.ERASER_SHADOW_COLOR="rgb(0,0,0)",this.ERASER_SHADOW_STYLE="blue",this.ERASER_STROKE_STYLE="rgb(0,0,255)",this.ERASER_SHADOW_OFFSET=-5,this.ERASER_SHADOW_BLUR=20}return Object(X["a"])(t,[{key:"setDrawPath",value:function(t){var e=this.width,i=this.ctx,a=this.type,r=$()(e);i.beginPath(),"circle"===a?i.arc(t.x,t.y,r/2,0,2*Math.PI,!1):i.rect(t.x-r/2,t.y-r/2,r,r),i.clip()}},{key:"setErasePath",value:function(t){var e=this.width,i=this.ctx,a=this.type,r=this.ERASER_LINE_WIDTH;i.beginPath(),"circle"===a?i.arc(t.x,t.y,e/2+r,0,2*Math.PI,!1):i.rect(t.x-e/2-r,t.y-e/2-r,e+2*r,e+2*r),i.clip()}},{key:"setEraserAttributes",value:function(){var t=this.ctx,e=this.ERASER_LINE_WIDTH,i=this.ERASER_SHADOW_BLUR,a=this.ERASER_SHADOW_OFFSET,r=this.ERASER_SHADOW_STYLE,s=this.ERASER_STROKE_STYLE;t.lineWidth=e,t.shadowColor=r,t.shadowOffsetX=a,t.shadowOffsetY=a,t.shadowBlur=i,t.strokeStyle=s}},{key:"eraseLast",value:function(t){var e=this.ctx,i=10,a=10,r="lightblue";e.save(),this.setErasePath(t),e.fillStyle="white",e.fill(),D({ctx:e,color:r,stepx:i,stepy:a}),e.restore()}},{key:"drawEraser",value:function(t){var e=this.ctx;e.save(),this.setEraserAttributes(),this.setDrawPath(t),e.stroke(),e.restore()}}]),t}(),Q=i("5f35"),V=i.n(Q),tt={data:function(){return{eraserWidth:25,eraserType:"circle",shapes:[],sides:3,startRadians:0,shape:"Line",isFillColor:!1,ctx:null,canvas:null,guidewires:!0,color:"cornflowerblue",rubberbandLine:{drawingSurfaceImageData:null,mousedown:{},rubberbandRect:{},dragging:!1},mode:"normal",selectedShape:null,draggingPoint:!1,rotatingLockEngaged:!1,rotatingLockRadians:0,rotatingShape:null,protractor:null,eraser:null}},mounted:function(){this.getContext(),this.setCanvasSize(),this.drawRubberbandLines()},watch:{mode:function(){var t=this.canvas,e=this.mode;switch(e){case"drag":case"edit":case"rotate":case"erase":t.style.cursor="pointer";break;case"normal":t.style.cursor="crosshair";break}this.inactiveEditing(),this.redraw()}},methods:{test:function(){var t=this.ctx,e=this.canvas,i=e.width,a=e.height,r=new Image;r.src=V.a,r.onload=function(){t.drawImage(r,0,0,i,a)}},setCanvasSize:function(){var t=this.canvas;t.width=window.innerWidth,t.height=window.innerHeight},stopRotatingShape:function(t){var e=this.selectedShape,i=this.rotatingLockRadians,a=Math.atan((t.y-e.y)/(t.x-e.x))-i;e.startRadians+=a,e.isRotated=!0,e.updatePointAfterRotated(),this.rotatingShape=void 0,this.rotatingLockEngaged=!1,this.rotatingLockRadians=0,this.redraw()},saveCanvasInfo:function(t){var e=this.rubberbandLine.mousedown,i=this.rubberbandLine,a=this.ctx,r=this.canvas;i.drawingSurfaceImageData=O({ctx:a,canvas:r}),e.x=t.x,e.y=t.y,i.dragging=!0},drawShapes:function(){var t=this.shapes;t.forEach(function(t){t.draw()})},drawBezierCurve:function(){var t=this.getEndAndControlPoints(),e=t.endPoints,i=t.controlPoints,a=this.ctx,r=this.shapes,s=this.rubberbandLine.dragging,n=this.color,o=new F({ctx:a,strokeStyle:n,fillStyle:n,endPoints:e,controlPoints:i});o.draw(),s||r.push(o)},getEndAndControlPoints:function(){var t=[{},{}],e=[{},{}],i=this.rubberbandLine.rubberbandRect,a=i.left,r=i.top,s=i.width,n=i.height;return t[0].x=a,t[0].y=r,t[1].x=a+s,t[1].y=r+n,e[0].x=a,e[0].y=r+n,e[1].x=a+s,e[1].y=r,{endPoints:t,controlPoints:e}},drawPolygon:function(){var t=this.rubberbandLine,e=t.dragging,i=t.rubberbandRect.width,a=t.mousedown,r=a.x,s=a.y,n=this.ctx,o=this.sides,h=this.startRadians,c=this.isFillColor,l=this.color,d=this.shapes,u=new z({centerX:r,centerY:s,radius:i,sides:o,startRadians:h,strokeStyle:l,fillStyle:l,filled:c,ctx:n});u.draw(),e||d.push(u)},getContext:function(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d")},erase:function(){var t=this.ctx,e=this.canvas;t.clearRect(0,0,e.width,e.height),D({ctx:t,color:"lightblue",stepx:10,stepy:10}),O({ctx:t,canvas:e})},drawRubberbandLines:function(){var t=this.ctx,e=this.color;t.strokeStyle=e,D({ctx:t,color:"lightblue",stepx:10,stepy:10})},updateRubberbandRect:function(t){var e=t.loc,i=this.rubberbandLine,a=i.rubberbandRect,r=i.mousedown;a.width=Math.abs(e.x-r.x),a.height=Math.abs(e.y-r.y),e.x>r.x?a.left=r.x:a.left=e.x,e.y>r.y?a.top=r.y:a.top=e.y},drawRubberbandShape:function(t){var e=t.loc,i=this.shape;this["draw".concat(i)]({loc:e})},drawRoundedRect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cornerRadius,i=void 0===e?10:e,a=this.ctx,r=this.color,s=this.isFillColor,n=this.shapes,o=this.rubberbandLine,h=o.dragging,c=o.rubberbandRect,l=c.width,d=c.height,u=o.mousedown,f=u.x,v=u.y,y=new q({ctx:a,filled:s,strokeStyle:r,fillStyle:r,width:l,height:d,cornerX:f,cornerY:v,cornerRadius:i});y.draw(),h||n.push(y)},drawCircle:function(t){var e,i=t.loc,a=this.ctx,r=this.rubberbandLine,s=r.dragging,n=r.rubberbandRect,o=n.width,h=n.height,c=r.mousedown,l=c.x,d=c.y,u=this.color,f=this.isFillColor,v=this.shapes;e=d===i.y?Math.abs(i.x-l):Math.sqrt(Math.pow(o,2)+Math.pow(h,2));var y=new B({centerX:l,centerY:d,radius:e,ctx:a,filled:f,strokeStyle:u,fillStyle:u});y.draw(),s||v.push(y)},drawLine:function(t){var e=t.loc,i=this.ctx,a=this.rubberbandLine,r=a.mousedown,s=r.x,n=r.y,o=a.dragging,h=this.color,c=this.shapes,l=e.x,d=e.y,u=new H({ctx:i,strokeStyle:h,beginX:s,beginY:n,endX:l,endY:d,filled:!1});u.draw(),o||c.push(u)},updateRubberband:function(t){var e=t.loc;this.updateRubberbandRect({loc:e}),this.drawRubberbandShape({loc:e})},inactiveEditing:function(){var t=this.shapes;t.forEach(function(t){t.isEditing=!1})},activeEditing:function(t){var e=t.shape;e.isEditing=!0,this.redraw()},getSelectedShape:function(t){var e=t.loc,i=this.shapes,a=this.ctx,r=this.mode,s=!0,n=!1,o=void 0;try{for(var h,c=v()(i);!(s=(h=c.next()).done);s=!0){var l=h.value;switch(r){case"drag":case"rotate":l.createPath();break;case"edit":l.createEditPath()}if(a.isPointInPath(e.x,e.y)){switch(this.selectedShape=l,r){case"edit":l.getDraggingPoint(e),l.savePointOffset(e),this.activeEditing({shape:l});break;case"drag":l.savePointOffset(e);break;case"rotate":this.rotatingShape=_({obj:l,exclusiveKey:["ctx"]});break}break}this.selectedShape=null}}catch(d){n=!0,o=d}finally{try{s||null==c.return||c.return()}finally{if(n)throw o}}},initProtractor:function(t){var e=this.ctx,i=this.rotatingLockRadians,a=this.rotatingLockEngaged,r=this.rotatingShape;if(this.rotatingShape){var s=new U({ctx:e,shape:r,loc:t,rotatingLockRadians:i});s.draw(),a||(this.rotatingLockEngaged=!0,this.rotatingLockRadians=Math.atan((t.y-r.y)/(t.x-r.x))),this.protractor=s}},rotateShape:function(t){var e=this.rotatingLockEngaged,i=this.rotatingLockRadians,a=this.protractor,r=this.rotatingShape;if(e){var s=t.y-r.y,n=t.x-r.x,o=Math.atan(s/n)-i;(n<0&&s>0||n<0&&s<=0)&&(o=Math.PI+o),this.redraw(),r.rotate(o),a.loc=t,a.draw()}},onMouseDown:function(t){var e=this.canvas,i=this.mode,a=this.rotatingShape,r=this.ctx,s=this.eraser,n=t.clientX,o=t.clientY,h=I({x:n,y:o,canvas:e});switch(t.preventDefault(),this.saveCanvasInfo(h),i){case"drag":this.getSelectedShape({loc:h});break;case"edit":this.getSelectedShape({loc:h});break;case"rotate":a?this.stopRotatingShape(h):(this.getSelectedShape({loc:h}),this.initProtractor(h));break;case"erase":if(!s){var c=this.eraserType,l=this.eraserWidth;this.eraser=new Z({ctx:r,type:c,width:l})}break}"edit"!==i&&this.inactiveEditing()},onMouseMove:function(t){var e=this.canvas,i=this.ctx,a=this.guidewires,r=this.shape,s=this.rubberbandLine,n=s.mousedown,o=s.dragging,h=s.drawingSurfaceImageData,c=this.mode,l=this.selectedShape,d=this.rotatingShape,u=this.eraser,f=t.clientX,v=t.clientY;t.preventDefault();var y=I({x:f,y:v,canvas:e});if(o){switch(c){case"drag":l&&l.updatePointsOnMoving(y);break;case"edit":l&&l.draggingPoint&&l.updatePointOnEditing(y);break;case"erase":u.eraseLast({x:n.x,y:n.y}),u.drawEraser(y),this.rubberbandLine.mousedown=y;break;case"normal":if(T({ctx:i,imgData:h}),this.updateRubberband({loc:y}),a){var g="Line"===r?y:n;A({ctx:i,x:g.x,y:g.y})}break}"drag"!==c&&"edit"!==c||this.redraw()}"rotate"===c&&d&&this.rotateShape(y)},onMouseUp:function(t){var e=this.ctx,i=this.canvas,a=this.rubberbandLine,r=this.rubberbandLine,s=r.drawingSurfaceImageData,n=r.mousedown,o=this.mode,h=this.eraser,c=this.selectedShape,l=t.clientX,d=t.clientY,u=I({x:l,y:d,canvas:i});switch(a.dragging=!1,o){case"normal":T({ctx:e,imgData:s}),this.updateRubberband({loc:u});break;case"erase":h.eraseLast(n);break;case"edit":case"drag":if(c){var f=c.type;switch(f){case"BezierCurve":c.setCenter();break}}break}},redraw:function(){var t=this.ctx,e=this.canvas;t.clearRect(0,0,e.width,e.height),D({ctx:t,color:"lightblue",stepx:10,stepy:10}),this.drawShapes()}}},et=tt,it=(i("5c85"),Object(n["a"])(et,d,u,!1,null,"649c7d62",null)),at=it.exports;a["a"].use(l["a"]);var rt=new l["a"]({routes:[{path:"/",name:"home",component:at}]}),st=i("2f62");a["a"].use(st["a"]);var nt=new st["a"].Store({state:{},mutations:{},actions:{}});i("78a7");a["a"].config.productionTip=!1,new a["a"]({router:rt,store:nt,render:function(t){return t(c)}}).$mount("#app")},"5c85":function(t,e,i){"use strict";var a=i("d561"),r=i.n(a);r.a},"5f35":function(t,e,i){t.exports=i.p+"img/test.6dc34951.jpg"},"78a7":function(t,e,i){},d561:function(t,e,i){}});
//# sourceMappingURL=app.40b276ce.js.map